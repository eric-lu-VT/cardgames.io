<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Play card games like Liar's Poker and President online for free with no sign-up. All you need are your friends and your electronic devices.">
    <meta name="author" content="Eric Lu">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>President - netcardgames.org</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/fontawesome.css">
    <link rel="stylesheet" href="../../assets/vendors/css/glightbox.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
      .rounded-pill {
        width: 25%;
        left: 37.5%;
        padding: 2px;
        margin-bottom: 16px
      }
      .form-control {
        position: absolute;
        width: 25%;
        left: 37.5%;
        align-self: center;
      }
      ol {
        padding-left: 0;
        list-style-position: inside;
      }
      #gameMenu {
        position: absolute;
        top: 56px;
        right: 0;
        z-index: 2;
        min-width: 41%;
      }
      #menuEnterNickname {
        display: none;
      }
      #gameSettingsScreen {
        display: none;
      }
      #initErrorMsg {
        display: none;
      }
      #gameScreen {
        display: none;
      }
      #txtOutOfRound {
        display: none;
      }
      #resultScreen {
        display: none;
      }
      #cardTradingScreen {
        display: none;
      }
      #isTraderScreen {
        display: none;
      }
      #isNotTraderScreen {
        display: none;
      }
      #notTradingScreen {
        display: none;
      }
      #cannotJoinScreen {
        display: none;
      }
      #cannotJoinScreen2 {
        display: none;
      }

    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark menu shadow fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">netcardgames.org</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item"></li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Games
              </a>
              <ul class="navbar-dark dropdown-menu menu shadow" aria-labelledby="navbarDropdown">
                <li class="nav-item"><a class="nav-link" href="/liars-poker">Liar's Poker</a></li>
                <li class="nav-item"><a class="nav-link" href="/president">President</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Site Details
              </a>
              <ul class="navbar-dark dropdown-menu menu shadow" aria-labelledby="navbarDropdown">
                <li class="nav-item"><a class="nav-link" href="/settings">Settings</a></li>
                <li class="nav-item"><a class="nav-link" href="/about">About</a></li>
                <li class="nav-item"><a class="nav-link" href="/contact">Contact</a></li>
                <li class="nav-item"><a class="nav-link" href="/privacy-policy">Privacy Policy</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div id="gameMenu">
      <div class="accordion-item shadow mb-3 fw-light">
        <h2 class="accordion-header" id="headingZero">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseZero" aria-expanded="false" aria-controls="collapseZero">
            <strong>Game Menu</strong>
          </button>
        </h2>
        <div id="collapseZero" class="accordion-collapse collapse show" aria-labelledby="headingZero" data-bs-parent="#accordionExample">
          <div class="accordion-body fw-light text-center">
            <h1 class="display-3 fw-bold text-uppercase gameId"></h1>
            <div class="heading-line"></div>
            <p class="playerNames lead"></p>
            
            <div id = "menuEnterNickname" class="form-group" style="margin-bottom: 60px">
              <input type="text" placeholder="Enter New Nickname" id="txtName" class="form-control form-control-md" style="text-align: center; min-width: 50%; left: 25%"/>
            </div>
            <div>
              <button type="button" class="rounded-pill btn-rounded border-primary" id="btnChangeName" style="min-width: 50%; left: 25%">
                <a class="nav-link" id="btnChangeNameTxt">
                  Change Nickname
                </a>
              </button>
            </div>
            <div class="heading-line"></div>

            <p class="startNumCards lead"></p>
          </div>
        </div>
      </div>
      
    </div>

    <section id="initialScreen" class="faq">
      <div class="container">
        <div class="row text-center mt-5"></div>
        <div class="row mt-5 mb-4 g-3 text-center">
          <h1 class="display-3 fw-bold text-uppercase gameId"></h1>
          <div class="heading-line"></div>
        </div>
        <!-- ACCORDION CONTENT  -->
        <div class="row mt-5">
          <div class="col-md-12">
            <div class="accordion" id="accordionExample">
              <!-- ACCORDION ITEM 1 -->
              <div class="accordion-item shadow mb-3 fw-light">
                <h2 class="accordion-header" id="headingOne">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                    <strong>Current Game Settings</strong>
                  </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                  <div class="accordion-body fw-light" style="text-align: center">
                    
                    <p class="gameMode lead"><strong>Game mode: </strong>NORMAL</p>
                    <p class="startNumCards lead"></p>

                  </div>
                </div>
              </div>
              <!-- ACCORDION ITEM 2 -->
              <div class="accordion-item shadow mb-3 fw-light">
                <h2 class="accordion-header" id="headingTwo">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    <strong>Players</strong>
                  </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                  <div class="accordion-body fw-light" style="text-align: center">
                    
                    <p class="playerNames lead"></p>

                  </div>
                </div>
              </div>  
              
              <section id="gameSettingsScreen">
                <!-- ACCORDION ITEM 3 -->
                <div class="accordion-item shadow mb-3 fw-light">
                  <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                      <strong>Manage Game</strong>
                    </button>
                  </h2>
                  <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                    <div class="accordion-body fw-light">
                      <div>
                        <button type="button" class="rounded-pill btn-rounded border-primary" style="margin-bottom: 0px" id="btnInit">
                          <a class="nav-link">
                            Start Game
                          </a>
                        </button>
                      </div>
                      <div class="row text-center mt-4" id = "initErrorMsg">
                        <h4 class="fw-bold lead mb-3">Cannot start game: need at least four players</h4>
                      </div>
                    </div>
                  </div>
                </div>
              </section>

            </div>
          </div>
        </div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
      </div>
    </section>

    <section id="gameScreen">
      <div class="container">
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
        <!-- ACCORDION CONTENT  -->
        <div class="row mt-5">
          <div class="col-md-12">
            <div class="accordion" id="accordionExample">
              
              <section id="gameScreenAlivePlayers">
                <section id="gamePlayScreen">
                  <div class="container">
                    <div class="row mt-5 mb-4 g-3 text-center">
                      <p class="lead" id="txtYourTurn"></p>

                      <div class="heading-line"></div>
                      
                      <div style="position: relative; margin-bottom: 0px">
                        <input type="text" placeholder="Propose Cards" id="txtNextHand" class="form-control form-control-md" style="text-align: center">
                      </div>
                      <div>
                        <button type="button" class="rounded-pill btn-rounded border-primary btnTakeTurn" style="margin-top: 42px">
                          <a class="nav-link">
                            Take Turn
                          </a>
                        </button>
                         <h4 class="fw-bold lead" style="margin-bottom: 0px">OR</h4>
                      </div>
                      <div>
                        <button type="button" class="rounded-pill btn-rounded border-primary" style="margin-bottom: 0px" id="btnPass">
                          <a class="nav-link">
                            Pass
                          </a>
                        </button>
                      </div>

                      <div>
                        <h4 class="fw-bold lead mb-3" id ="errorMsg"></h4>
                      </div>
                    </div>
                  </div>
                </section>

                <section id = "gameWaitScreen">
                  <div class="container">
                    <div class="row mt-5 mb-4 g-3 text-center">
                      <p class="lead" id="txtOutOfRound"></p>
                      <p class="lead" id="txtNotYourTurn"></p>
                    </div>
                  </div>
                </section>
                
                <!-- ACCORDION ITEM 3 -->
                <div class="accordion-item shadow mb-3 fw-light" id="yourCards">
                  <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                      <strong>Your Cards</strong>
                    </button>
                  </h2>
                  <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                    <div class="accordion-body fw-light" style="text-align: center">
                      <p class="lead currentUserCards"></p>
                    </div>
                  </div>
                </div> 
              </section>
              
              <!-- ACCORDION ITEM 4 -->
              <div class="accordion-item shadow mb-3 fw-light">
                <h2 class="accordion-header" id="headingFour">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                    <strong>Player Statuses</strong>
                  </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                  <div class="accordion-body fw-light" style="text-align: center">
                    <p class="lead" id="playersNumCards"></p>
                  </div>
                </div>
              </div>

              <!-- ACCORDION ITEM 5 -->
              <div class="accordion-item shadow mb-3 fw-light" id="middleCards">
                <h2 class="accordion-header" id="headingFive">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                    <strong>Current Top Of Pile</strong>
                  </button>
                </h2>
                <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                  <div class="accordion-body fw-light" style="text-align: center" id="currentPile"></div>
                </div>
              </div> 

              <!-- ACCORDION ITEM 6 -->
              <div class="accordion-item shadow mb-3 fw-light" id="finishOrderDisplay">
                <h2 class="accordion-header" id="headingSix">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                    <strong>Finish Order</strong>
                  </button>
                </h2>
                <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix" data-bs-parent="#accordionExample">
                  <div class="accordion-body fw-light" style="text-align: center">
                    <p class="lead finishOrder"></p>
                  </div>
                </div>
              </div> 
              
            </div>
          </div>
        </div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
      </div>
    </section>

    <section id = "resultScreen">
      <div class="container">
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
        <!-- ACCORDION CONTENT  -->
        <div class="row mt-5">
          <div class="col-md-12">
            <div class="accordion" id="accordionExample">
              <!-- ACCORDION ITEM 7 -->
              <div class="accordion-item shadow mb-3 fw-light">
                <h2 class="accordion-header" id="headingSeven">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                    <strong>Finish Order</strong>
                  </button>
                </h2>
                <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#accordionExample">
                  <div class="accordion-body fw-light" style="text-align: center">
                    <p class="lead finishOrder"></p>
                  </div>
                </div>
              </div>
              <!-- ACCORDION ITEM 8 -->
              <div class="accordion-item shadow mb-3 fw-light">
                <h2 class="accordion-header" id="headingEleven">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                    <strong>Results</strong>
                  </button>
                </h2>
                <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight" data-bs-parent="#accordionExample">
                  <div class="accordion-body fw-light" style="text-align: center">
                    <p class="lead" id="playerPoints"></p>
                    <p class="lead" id="winnerDetermined"></p>
                  </div>
                </div>
              </div>
              <button type="button" class="rounded-pill btn-rounded border-primary" id="btnOk">
                <a class="nav-link">
                  OK
                </a>
              </button> 
            </div>
          </div>
        </div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
      </div>
    </section>

    <section id = "cardTradingScreen">
      <div class="container">
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
        <!-- ACCORDION CONTENT  -->
        <div class="row mt-5">
          <div class="col-md-12">
            <div class="accordion" id="accordionExample">
              <section id="isTraderScreen">
                <div class="container">
                  <div class="row mt-5 mb-4 g-3 text-center">
                    <p class="lead" id="traderTxt"></p>
        
                    <div class="heading-line"></div>   
                    <div style="position: relative">
                      <input type="text" placeholder="Ask For Cards" id="takeCardsTxt" class="form-control form-control-md" style="text-align: center">
                    </div>
                    <div style="position: relative">
                      <input type="text" placeholder="Give Up Cards" id="giveCardsTxt" class="form-control form-control-md" style="text-align: center; margin-top: 42px">
                    </div>
                    <div>
                      <button type="button" class="rounded-pill btn-rounded border-primary" id="btnRequestCards" style="margin-top: 90px">
                        <a class="nav-link">
                          Request Cards
                        </a>
                      </button>
                    </div>

                    <div>
                      <h4 class="fw-bold lead mb-3" id ="requestResult"></h4>
                    </div>
                  </div>
                </div>

                <!-- ACCORDION ITEM 9 -->
                <div class="accordion-item shadow mb-3 fw-light">
                  <h2 class="accordion-header" id="headingNine">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                      <strong>Your cards:</strong>
                    </button>
                  </h2>
                  <div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine" data-bs-parent="#accordionExample">
                    <div class="accordion-body fw-light" style="text-align: center">
                      <p class="lead currentUserCards"></p>
                    </div>
                  </div>
                </div>
              </section>

              <section id="isNotTraderScreen">
                <div class="container">
                  <div class="row mt-5 mb-4 g-3 text-center">
                    <p class="lead" id="notTraderTxt"></p>
                  </div>

                  <!-- ACCORDION ITEM 10 -->
                  <div class="accordion-item shadow mb-3 fw-light" id="txtCdRmv">
                    <h2 class="accordion-header" id="headingTen">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTen" aria-expanded="false" aria-controls="collapseTen">
                        <strong>Your cards:</strong>
                      </button>
                    </h2>
                    <div id="collapseTen" class="accordion-collapse collapse" aria-labelledby="headingTen" data-bs-parent="#accordionExample">
                      <div class="accordion-body fw-light" style="text-align: center">
                        <p class="lead currentUserCards"></p>
                      </div>
                    </div>
                  </div>
                </div>
              </section>

              <section id="notTradingScreen">
                <div class="container">
                  <div class="row mt-5 mb-4 g-3 text-center">
                    <p class="lead">Please wait for others to complete their trading...</p>
                  </div>

                  <!-- ACCORDION ITEM 11 -->
                  <div class="accordion-item shadow mb-3 fw-light">
                    <h2 class="accordion-header" id="headingEleven">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEleven" aria-expanded="false" aria-controls="collapseEleven">
                        <strong>Your cards:</strong>
                      </button>
                    </h2>
                    <div id="collapseEleven" class="accordion-collapse collapse" aria-labelledby="headingEleven" data-bs-parent="#accordionExample">
                      <div class="accordion-body fw-light" style="text-align: center">
                        <p class="lead currentUserCards"></p>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
        <div class="row text-center mt-5"></div>
      </div>
    </section>
    
    <section id="cannotJoinScreen">
      <div class="container">
        <div class="row text-center mt-5"></div>
        <div class="row mt-5 mb-4 g-3 text-center">
          <p class="lead">This game has already started. You cannot join.</p>
          <button type="button" class="rounded-pill btn-rounded border-primary btnGoBack">
            <a class="nav-link">
              OK
            </a>
          </button>
        </div>
      </div>
    </section>

    <section id="cannotJoinScreen2">
      <div class="container">
        <div class="row text-center mt-5"></div>
        <div class="row mt-5 mb-4 g-3 text-center">
          <p class="lead">This game is full (8 players max). You cannot join.</p>
          <button type="button" class="rounded-pill btn-rounded border-primary btnGoBack">
            <a class="nav-link">
              OK
            </a>
          </button>
        </div>
      </div>
    </section>
      
    <footer class="footer fixed-bottom">
      <!-- START THE SOCIAL MEDIA CONTENT  -->
      <div class="footer-sm" >
        <div class="container">
          <div class="row py-2 text-center text-white">
            <div class="col-12">
              <div class="footer-bottom__copyright">
                <a href="https://github.com/eric-lu-VT/netcardgames.org" target="_blank" rel="noopener noreferrer">
                  <i class="fab fa-github" style="font-size: 16px"></i></a>
                | Created by <a href="https://eric-lu.com/" target="_blank" rel="noopener noreferrer">Eric Lu</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
    </footer>
     
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
    crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'))
        var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
          return new bootstrap.Dropdown(dropdownToggleEl);
        });
      
      var collapseElementList = [].slice.call(document.querySelectorAll('.collapse'));
      var collapseList = collapseElementList.map(function (collapseEl) {
        return new bootstrap.Collapse(collapseEl)
      });
      
      let clientId = null;
      let clientName = localStorage.getItem("clientName"); 
      let gameId = null;
      txtName.value = localStorage.getItem("clientName");

      const gameMenu = document.getElementById("gameMenu");
      const initialScreen = document.getElementById("initialScreen");
      const gameScreen = document.getElementById("gameScreen");
      const gamePlayScreen = document.getElementById("gamePlayScreen");
      const gameWaitScreen = document.getElementById("gameWaitScreen");
      const resultScreen = document.getElementById("resultScreen");
      const cardTradingScreen = document.getElementById("cardTradingScreen");
      const isTraderScreen = document.getElementById("isTraderScreen");
      const isNotTraderScreen = document.getElementById("isNotTraderScreen");
      const notTradingScreen = document.getElementById("notTradingScreen");
      
      const cannotJoinScreen = document.getElementById("cannotJoinScreen");
      const cannotJoinScreen2 = document.getElementById("cannotJoinScreen2");

      const btnInit = document.getElementById("btnInit");
      const btnChangeName = document.getElementById("btnChangeName");
      const btnTakeTurn = document.querySelectorAll(".btnTakeTurn");
      const btnPass = document.getElementById("btnPass");
      const btnOk = document.getElementById("btnOk");
      const btnRequestCards = document.getElementById("btnRequestCards");

      var socket = io("/president");

      socket.on('connect', () => {
        clientId = socket.id;
        if(clientName === null) {
          clientName = clientId;
        }
        gameId = window.location.pathname.substring(17);
        // console.log(gameId);

        const payLoad = {
          "clientId": clientId,
          "clientName": clientName,
          "gameId": gameId
        }
        
        socket.emit("join", payLoad);
        
        // console.log("PRESIDENT: " + clientId); //test
      });

      btnInit.addEventListener("click", e => {

        const payLoad = {
            "clientId": clientId,
            "gameId": gameId
        }
        socket.emit("init", payLoad);
      });

      btnChangeName.addEventListener("click", e => {
        
        if(document.getElementById("btnChangeNameTxt").innerText === "Change Nickname") {
          document.getElementById("btnChangeNameTxt").innerText = "OK";
          document.getElementById("menuEnterNickname").style.display = "block";
        }
        else if(document.getElementById("btnChangeNameTxt").innerText === "OK") {
          document.getElementById("btnChangeNameTxt").innerText = "Change Nickname";
          document.getElementById("menuEnterNickname").style.display = "none";
          const payLoad = {
            "gameId": gameId,
            "clientId": clientId,
            "clientName": txtName.value
          }
          socket.emit("changeName", payLoad);
        }
      });

      btnTakeTurn.forEach(b => {
        b.addEventListener("click", e => {
          const payLoad = {
            "clientId": clientId,
            "gameId": gameId,
            "nextPileStr": txtNextHand.value
          }

          socket.emit("takeTurn", payLoad);
        });
      })

      btnPass.addEventListener("click", e => {
        
        const payLoad = {
          "clientId": clientId,
          "gameId": gameId
        }

        socket.emit("passTurn", payLoad);
      });

      btnRequestCards.addEventListener("click", e => {

        const payLoad = {
          "clientId": clientId,
          "gameId": gameId,
          "takeCardsTxt": takeCardsTxt.value,
          "giveCardsTxt": giveCardsTxt.value
        }

        socket.emit("requestCards", payLoad);
      });

      var handlerOk = function(e) {
        const payLoad = {
            "clientId": clientId,
            "gameId": gameId
        }
        socket.emit("ok", payLoad);
      }

      var handlerHome = function(e) {
        const payLoad = {
            "clientId": clientId,
            "gameId": gameId
        }
        socket.emit("home", payLoad);
      }
      
      //join
      socket.on("join", (response) => {
        if(response.active) {
          initialScreen.style.display = "none";
          gameMenu.style.display = "none";
          cannotJoinScreen.style.display = "block";
        }
        else if(!response.success) {
          initialScreen.style.display = "none";
          gameMenu.style.display = "none";
          cannotJoinScreen2.style.display = "block";
        }
        else {
          // document.getElementById("initErrorMsg").style.display = "none";
          Array.from(document.getElementsByClassName("gameId")).forEach(e => {
            e.innerHTML = gameId;
          });
          document.title = gameId + " - President - netcardgames.org"

          var str = '<ol>'
          response.clientsBasicInfo.forEach (c => {
            str += '<li>'+ c.clientName + '</li>';
          });
          str += '</ol>';
          
          Array.from(document.getElementsByClassName("startNumCards")).forEach(e => {
            e.innerHTML = "<strong>Starting # of cards: </strong>" + response.START_NUM_CARDS;
          });
          Array.from(document.getElementsByClassName("playerNames")).forEach(e => {
            e.innerHTML = str;
          });
          
          if(response.hostId === clientId) {
            document.getElementById("gameSettingsScreen").style.display = "block";
          }
        }
      });

      socket.on("failStart", () => {
        document.getElementById("initErrorMsg").style.display = "block";
      });

      socket.on("changeName", (response) => {
        
        clientName = response.newClientName;
        localStorage.setItem("clientName", clientName);

        var str = '<ol>'
        response.clientsBasicInfo.forEach (c => {
          if(response.isActive) {
            str += '<li>'+ c.clientName + " (" + c.points + " points)</li>";
          }
          else {
            str += '<li>'+ c.clientName + '</li>';
          }
        });
        str += '</ol>';
        Array.from(document.getElementsByClassName("playerNames")).forEach(e => {
          e.innerHTML = str;
        });

        // console.log("Client name Set successfully " + clientName);
      });

      socket.on("update", (response) => {
        if(response.result.includes("ERROR")) {
          document.getElementById("errorMsg").innerHTML = response.result;
        }
        else {
        
          document.getElementById("errorMsg").innerHTML = "";
          initialScreen.style.display = "none";
          gameScreen.style.display = "block";
          resultScreen.style.display = "none";
          cardTradingScreen.style.display = "none";

          if(!response.isCurrentPlayer) {
            gamePlayScreen.style.display = "none";
            gameWaitScreen.style.display = "block";
            if(!response.targetPlayer.inRound) {
              console.log("test"); //temp
              document.getElementById("txtOutOfRound").style.display = "block";
              document.getElementById("txtOutOfRound").innerHTML = "You sucessfully played all your cards!";
              document.getElementById("yourCards").style.display = "none";
            }
          }
          else {
            gamePlayScreen.style.display = "block";
            gameWaitScreen.style.display = "none";
          }
          Array.from(document.getElementsByClassName("currentUserCards")).forEach(e => {
            while(e.firstChild) {
              e.removeChild(e.firstChild);
            }
            var currentUserCardsFrag = document.createDocumentFragment();
            response.targetPlayer.cardsAsURL.forEach(t => {
              var img = document.createElement('img');
              img.src = t;
              img.width = "128";
              img.height = "186";
              currentUserCardsFrag.appendChild(img);
            });
            e.appendChild(currentUserCardsFrag);
            
            // e.innerHTML = response.targetPlayer.cardsAsStr;
          });

          var str = '<ol>'
          response.inRoundBasicInfo.forEach(p => {
            var cardEmoji = "";
            for(var i = 0; i < p.numCards; i++) {
              cardEmoji += "ðŸƒ";
            }
            str += '<li>'+ p.clientName + ' (' + cardEmoji + ')</li>';
          });
          str += '</ol>';
          document.getElementById("playersNumCards").innerHTML = str;
          document.getElementById("txtNotYourTurn").innerHTML = "<strong>" + response.currentPlayerName + "</strong> is moving currently...";
          document.getElementById("txtYourTurn").innerHTML = "<strong>" + response.currentPlayerName + "</strong>, it is currently your turn."; 
          
          while(document.getElementById("currentPile").firstChild) {
            document.getElementById("currentPile").removeChild(document.getElementById("currentPile").firstChild);
          }
          var currentHandFrag = document.createDocumentFragment();
          response.newPileArr.forEach(t => {
            var img = document.createElement('img');
            img.src = t;
            img.width = "128";
            img.height = "186";
            currentHandFrag.appendChild(img);
          });
          document.getElementById("currentPile").appendChild(currentHandFrag);

          var str = '<ol>';
          response.inRoundBasicInfo.forEach(c => {
            if(c.clientId === response.currentPlayerId) {
              str += '<li> <b> <u>' + c.clientName + " (" + c.points + " points) </u> </b> </li>";
            }
            else {
              str += '<li>' + c.clientName + " (" + c.points + " points) </li>";
            }
          });
          str += '</ol>';
          Array.from(document.getElementsByClassName("playerNames")).forEach(e => {
            e.innerHTML = str;
          });

          if(response.roundPlacementBasicInfo.length === 0) {
            document.getElementById("finishOrderDisplay").style.display = "none";
          }
          else {
            document.getElementById("finishOrderDisplay").style.display = "block";
            str = '<ol>';
            response.roundPlacementBasicInfo.forEach(c => {
              str += '<li>' + c.clientName + '</li>';
            });
            str += '</ol>';
            Array.from(document.getElementsByClassName("finishOrder")).forEach(e => {
              e.innerHTML = str;
            });
          }
        }
      });

      socket.on("endRound", (response) => {

        initialScreen.style.display = "none";
        gameScreen.style.display = "none";
        resultScreen.style.display = "block";
        document.getElementById("txtOutOfRound").style.display = "none";
        document.getElementById("txtOutOfRound").innerHTML = "";
        document.getElementById("yourCards").style.display = "block";

        var str = '<ol>';
        response.roundPlacementBasicInfo.forEach(c => {
          str += '<li>' + c.clientName + '</li>';
        });
        str += '</ol>';
        Array.from(document.getElementsByClassName("finishOrder")).forEach(e => {
          e.innerHTML = str;
        });

        str = '<ol>'
        response.roundPlacementBasicInfo.forEach(p => {
          str += '<li>'+ p.clientName + ' (' + p.points + ' points)</li>';
        });
        str += '</ol>';
        document.getElementById("playerPoints").innerHTML = str;

        if(response.winnerDetermined) {
          document.getElementById("winnerDetermined").style.display = "block";
          str = "The following player(s) have won the game: "
          response.winnerPlayerStr.forEach(p => {
            str += (p + ", ");
          });   
          document.getElementById("winnerDetermined").innerHTML = str.substring(0, str.length - 2);
          btnOk.addEventListener("click", handlerHome);
        }
        else {
          document.getElementById("winnerDetermined").style.display = "none";
          document.getElementById("winnerDetermined").innerHTML = "";
          btnOk.addEventListener("click", handlerOk);
        }
      });

      socket.on("beginTrading", (response) => {
        
        resultScreen.style.display = "none";
        cardTradingScreen.style.display = "block";
        Array.from(document.getElementsByClassName("currentUserCards")).forEach(e => {
          while(e.firstChild) {
            e.removeChild(e.firstChild);
          }
          var currentUserCardsFrag = document.createDocumentFragment();
          response.targetPlayer.cardsAsURL.forEach(t => {
            var img = document.createElement('img');
            img.src = t;
            img.width = "128";
            img.height = "186";
            currentUserCardsFrag.appendChild(img);
          });
          e.appendChild(currentUserCardsFrag);
        });

        if(response.isTrading) {
          if(response.isTrader) {
            isTraderScreen.style.display = "block";
            isNotTraderScreen.style.display = "none";
            notTradingScreen.style.display = "none";
            document.getElementById("traderTxt").innerHTML = 
              "You may ask <strong>" + response.tradingWithName + "</strong> for <strong>" + response.numCardsTrading +"</strong> card(s)...";
          }
          else {
            isTraderScreen.style.display = "none";
            isNotTraderScreen.style.display = "block";
            notTradingScreen.style.display = "none";
            document.getElementById("notTraderTxt").innerHTML = 
              "<strong>" + response.tradingWithName + "</strong> is switching <strong>" + response.numCardsTrading +"</strong> card(s) with you...";
          }
        }
        else {
          isTraderScreen.style.display = "none";
          isNotTraderScreen.style.display = "none";
          notTradingScreen.style.display = "block";
        }
      }); 

      socket.on("requestCards", (response) => {
        if(response.result.includes("ERROR")) {
          document.getElementById("requestResult").innerHTML = response.result;
        }
        else {
          document.getElementById("requestResult").innerHTML = "";
          isTraderScreen.style.display = "none";
          isNotTraderScreen.style.display = "none";
          notTradingScreen.style.display = "block";
          Array.from(document.getElementsByClassName("currentUserCards")).forEach(e => {
            while(e.firstChild) {
              e.removeChild(e.firstChild);
            }
            var currentUserCardsFrag = document.createDocumentFragment();
            response.targetPlayer.cardsAsURL.forEach(t => {
              var img = document.createElement('img');
              img.src = t;
              img.width = "128";
              img.height = "186";
              currentUserCardsFrag.appendChild(img);
            });
            e.appendChild(currentUserCardsFrag);
          });
        }
      });

      socket.on("ok", (response) => {
        
        if(response.num_ok_needed !== 0) {
          btnOk.removeEventListener("click", handlerOk);
          //TODO: add more
        }
      });

      socket.on("home", () => {
        btnOk.removeEventListener("home", handlerHome);
        window.location.href = "/president";
      });
    </script>
  </body>
</html>